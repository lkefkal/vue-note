var We=Object.defineProperty;var Ye=(a,s,n)=>s in a?We(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n;var Ee=(a,s,n)=>(Ye(a,typeof s!="symbol"?s+"":s,n),n);import{_ as Ve}from"./PCodeBlockDisplay-08e3759f.js";import{j as Be,k as d,l as Xe,m as Ze,n as $,q as Se,s as qe,u as te,x as _e,y as Ge,z as oe,A as $e,B as Je,C as Qe,D as Ie,E as ae,G as et,H as tt,I as ot,J as at,K as nt,L as ne,M as B,N as Fe,P as st,Q as lt,i as rt,R as it,o as f,c as w,a as m,F as q,S as h,T as o,U as X,e as b,W as I,w as S,X as Z,Y as R,Z as se,b as z,$ as ut,a0 as ct,a1 as pt,t as k,a2 as dt,a3 as ft,a4 as ze,a5 as vt,V as mt,O as ht,_ as yt,h as H}from"./index-1dbab7da.js";import{E as bt,a as gt}from"./el-descriptions-item-fdf2b987.js";import{u as xt,a as wt,b as Ct}from"./use-form-common-props-be574cc6.js";import{U as le}from"./event-43d54cf5.js";import{u as Et,a as St}from"./el-button-0b6673d9.js";import"./PCodeBlock-8793c1d2.js";const _t=()=>Be&&/firefox/i.test(window.navigator.userAgent),It=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a),Ft=["class","style"],zt=/^on[A-Z]/,Pt=(a={})=>{const{excludeListeners:s=!1,excludeKeys:n}=a,t=d(()=>((n==null?void 0:n.value)||[]).concat(Ft)),l=Ze();return l?d(()=>{var i;return Xe(Object.entries((i=l.proxy)==null?void 0:i.$attrs).filter(([u])=>!t.value.includes(u)&&!(s&&zt.test(u))))}):d(()=>({}))};function Vt(a){const s=$();function n(){if(a.value==null)return;const{selectionStart:l,selectionEnd:i,value:u}=a.value;if(l==null||i==null)return;const g=u.slice(0,Math.max(0,l)),p=u.slice(Math.max(0,i));s.value={selectionStart:l,selectionEnd:i,value:u,beforeTxt:g,afterTxt:p}}function t(){if(a.value==null||s.value==null)return;const{value:l}=a.value,{beforeTxt:i,afterTxt:u,selectionStart:g}=s.value;if(i==null||u==null||g==null)return;let p=l.length;if(l.endsWith(u))p=l.length-u.length;else if(l.startsWith(i))p=i.length;else{const y=i[g-1],C=l.indexOf(y,g-1);C!==-1&&(p=C+1)}a.value.setSelectionRange(p,p)}return[n,t]}let x;const Bt=`
  height:0 !important;
  visibility:hidden !important;
  ${_t()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,$t=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function kt(a){const s=window.getComputedStyle(a),n=s.getPropertyValue("box-sizing"),t=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),l=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:$t.map(u=>`${u}:${s.getPropertyValue(u)}`).join(";"),paddingSize:t,borderSize:l,boxSizing:n}}function Pe(a,s=1,n){var t;x||(x=document.createElement("textarea"),document.body.appendChild(x));const{paddingSize:l,borderSize:i,boxSizing:u,contextStyle:g}=kt(a);x.setAttribute("style",`${g};${Bt}`),x.value=a.value||a.placeholder||"";let p=x.scrollHeight;const y={};u==="border-box"?p=p+i:u==="content-box"&&(p=p-l),x.value="";const C=x.scrollHeight-l;if(Se(s)){let v=C*s;u==="border-box"&&(v=v+l+i),p=Math.max(v,p),y.minHeight=`${v}px`}if(Se(n)){let v=C*n;u==="border-box"&&(v=v+l+i),p=Math.min(v,p)}return y.height=`${p}px`,(t=x.parentNode)==null||t.removeChild(x),x=void 0,y}const Dt=qe({id:{type:String,default:void 0},size:xt,disabled:Boolean,modelValue:{type:te([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:te([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:_e},prefixIcon:{type:_e},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:te([Object,Array,String]),default:()=>Ge({})}}),At={[le]:a=>oe(a),input:a=>oe(a),change:a=>oe(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Nt=["role"],Tt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Mt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Ot=$e({name:"ElInput",inheritAttrs:!1}),Rt=$e({...Ot,props:Dt,emits:At,setup(a,{expose:s,emit:n}){const t=a,l=Je(),i=Qe(),u=d(()=>{const e={};return t.containerRole==="combobox"&&(e["aria-haspopup"]=l["aria-haspopup"],e["aria-owns"]=l["aria-owns"],e["aria-expanded"]=l["aria-expanded"]),e}),g=d(()=>[t.type==="textarea"?ue.b():r.b(),r.m(ke.value),r.is("disabled",P.value),r.is("exceed",Ne.value),{[r.b("group")]:i.prepend||i.append,[r.bm("group","append")]:i.append,[r.bm("group","prepend")]:i.prepend,[r.m("prefix")]:i.prefix||t.prefixIcon,[r.m("suffix")]:i.suffix||t.suffixIcon||t.clearable||t.showPassword,[r.bm("suffix","password-clear")]:U.value&&J.value},l.class]),p=d(()=>[r.e("wrapper"),r.is("focus",D.value)]),y=Pt({excludeKeys:d(()=>Object.keys(u.value))}),{form:C,formItem:v}=Et(),{inputId:ie}=St(t,{formItemContext:v}),ke=wt(),P=Ct(),r=Ie("input"),ue=Ie("textarea"),L=ae(),_=ae(),D=$(!1),G=$(!1),A=$(!1),K=$(!1),ce=$(),j=ae(t.inputStyle),N=d(()=>L.value||_.value),pe=d(()=>{var e;return(e=C==null?void 0:C.statusIcon)!=null?e:!1}),T=d(()=>(v==null?void 0:v.validateState)||""),de=d(()=>T.value&&et[T.value]),De=d(()=>K.value?tt:ot),Ae=d(()=>[l.style,t.inputStyle]),fe=d(()=>[t.inputStyle,j.value,{resize:t.resize}]),F=d(()=>at(t.modelValue)?"":String(t.modelValue)),U=d(()=>t.clearable&&!P.value&&!t.readonly&&!!F.value&&(D.value||G.value)),J=d(()=>t.showPassword&&!P.value&&!t.readonly&&!!F.value&&(!!F.value||D.value)),V=d(()=>t.showWordLimit&&!!y.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!P.value&&!t.readonly&&!t.showPassword),Q=d(()=>F.value.length),Ne=d(()=>!!V.value&&Q.value>Number(y.value.maxlength)),Te=d(()=>!!i.suffix||!!t.suffixIcon||U.value||t.showPassword||V.value||!!T.value&&pe.value),[Me,Oe]=Vt(L);nt(_,e=>{if(Re(),!V.value||t.resize!=="both")return;const c=e[0],{width:E}=c.contentRect;ce.value={right:`calc(100% - ${E+15+6}px)`}});const M=()=>{const{type:e,autosize:c}=t;if(!(!Be||e!=="textarea"||!_.value))if(c){const E=ze(c)?c.minRows:void 0,Y=ze(c)?c.maxRows:void 0,Ce=Pe(_.value,E,Y);j.value={overflowY:"hidden",...Ce},B(()=>{_.value.offsetHeight,j.value=Ce})}else j.value={minHeight:Pe(_.value).minHeight}},Re=(e=>{let c=!1;return()=>{var E;if(c||!t.autosize)return;((E=_.value)==null?void 0:E.offsetParent)===null||(e(),c=!0)}})(M),O=()=>{const e=N.value,c=t.formatter?t.formatter(F.value):F.value;!e||e.value===c||(e.value=c)},ee=async e=>{Me();let{value:c}=e.target;if(t.formatter&&(c=t.parser?t.parser(c):c),!A.value){if(c===F.value){O();return}n(le,c),n("input",c),await B(),O(),Oe()}},ve=e=>{n("change",e.target.value)},me=e=>{n("compositionstart",e),A.value=!0},he=e=>{var c;n("compositionupdate",e);const E=(c=e.target)==null?void 0:c.value,Y=E[E.length-1]||"";A.value=!It(Y)},ye=e=>{n("compositionend",e),A.value&&(A.value=!1,ee(e))},He=()=>{K.value=!K.value,W()},W=async()=>{var e;await B(),(e=N.value)==null||e.focus()},Le=()=>{var e;return(e=N.value)==null?void 0:e.blur()},be=e=>{D.value=!0,n("focus",e)},ge=e=>{var c;D.value=!1,n("blur",e),t.validateEvent&&((c=v==null?void 0:v.validate)==null||c.call(v,"blur").catch(E=>Fe()))},Ke=e=>{G.value=!1,n("mouseleave",e)},je=e=>{G.value=!0,n("mouseenter",e)},xe=e=>{n("keydown",e)},Ue=()=>{var e;(e=N.value)==null||e.select()},we=()=>{n(le,""),n("change",""),n("clear"),n("input","")};return ne(()=>t.modelValue,()=>{var e;B(()=>M()),t.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(c=>Fe()))}),ne(F,()=>O()),ne(()=>t.type,async()=>{await B(),O(),M()}),st(()=>{!t.formatter&&t.parser,O(),B(M)}),s({input:L,textarea:_,ref:N,textareaStyle:fe,autosize:lt(t,"autosize"),focus:W,blur:Le,select:Ue,clear:we,resizeTextarea:M}),(e,c)=>rt((f(),w("div",se(o(u),{class:o(g),style:o(Ae),role:e.containerRole,onMouseenter:je,onMouseleave:Ke}),[m(" input "),e.type!=="textarea"?(f(),w(q,{key:0},[m(" prepend slot "),e.$slots.prepend?(f(),w("div",{key:0,class:h(o(r).be("group","prepend"))},[X(e.$slots,"prepend")],2)):m("v-if",!0),b("div",{class:h(o(p))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),w("span",{key:0,class:h(o(r).e("prefix"))},[b("span",{class:h(o(r).e("prefix-inner")),onClick:W},[X(e.$slots,"prefix"),e.prefixIcon?(f(),I(o(R),{key:0,class:h(o(r).e("icon"))},{default:S(()=>[(f(),I(Z(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),b("input",se({id:o(ie),ref_key:"input",ref:L,class:o(r).e("inner")},o(y),{type:e.showPassword?K.value?"text":"password":e.type,disabled:o(P),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:t.form,onCompositionstart:me,onCompositionupdate:he,onCompositionend:ye,onInput:ee,onFocus:be,onBlur:ge,onChange:ve,onKeydown:xe}),null,16,Tt),m(" suffix slot "),o(Te)?(f(),w("span",{key:1,class:h(o(r).e("suffix"))},[b("span",{class:h(o(r).e("suffix-inner")),onClick:W},[!o(U)||!o(J)||!o(V)?(f(),w(q,{key:0},[X(e.$slots,"suffix"),e.suffixIcon?(f(),I(o(R),{key:0,class:h(o(r).e("icon"))},{default:S(()=>[(f(),I(Z(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),o(U)?(f(),I(o(R),{key:1,class:h([o(r).e("icon"),o(r).e("clear")]),onMousedown:ct(o(pt),["prevent"]),onClick:we},{default:S(()=>[z(o(ut))]),_:1},8,["class","onMousedown"])):m("v-if",!0),o(J)?(f(),I(o(R),{key:2,class:h([o(r).e("icon"),o(r).e("password")]),onClick:He},{default:S(()=>[(f(),I(Z(o(De))))]),_:1},8,["class"])):m("v-if",!0),o(V)?(f(),w("span",{key:3,class:h(o(r).e("count"))},[b("span",{class:h(o(r).e("count-inner"))},k(o(Q))+" / "+k(o(y).maxlength),3)],2)):m("v-if",!0),o(T)&&o(de)&&o(pe)?(f(),I(o(R),{key:4,class:h([o(r).e("icon"),o(r).e("validateIcon"),o(r).is("loading",o(T)==="validating")])},{default:S(()=>[(f(),I(Z(o(de))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(f(),w("div",{key:1,class:h(o(r).be("group","append"))},[X(e.$slots,"append")],2)):m("v-if",!0)],64)):(f(),w(q,{key:1},[m(" textarea "),b("textarea",se({id:o(ie),ref_key:"textarea",ref:_,class:o(ue).e("inner")},o(y),{tabindex:e.tabindex,disabled:o(P),readonly:e.readonly,autocomplete:e.autocomplete,style:o(fe),"aria-label":e.label,placeholder:e.placeholder,form:t.form,onCompositionstart:me,onCompositionupdate:he,onCompositionend:ye,onInput:ee,onFocus:be,onBlur:ge,onChange:ve,onKeydown:xe}),null,16,Mt),o(V)?(f(),w("span",{key:0,style:dt(ce.value),class:h(o(r).e("count"))},k(o(Q))+" / "+k(o(y).maxlength),7)):m("v-if",!0)],64))],16,Nt)),[[it,e.type!=="hidden"]])}});var Ht=ft(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Lt=vt(Ht);var Kt=Object.defineProperty,jt=Object.getOwnPropertyDescriptor,Ut=(a,s,n,t)=>{for(var l=t>1?void 0:t?jt(s,n):s,i=a.length-1,u;i>=0;i--)(u=a[i])&&(l=(t?u(s,n,l):u(l))||l);return t&&l&&Kt(s,n,l),l};let re=class extends mt{constructor(){super(...arguments);Ee(this,"input","")}get code(){return`
        <script setup>
        import { ref } from 'vue';
        const input = ref('')
        <\/scripts>

        <template>
          <p>input: {{ input }}</p>
          <el-input v-model="input" placeholder="请输入内容"></el-input>
          <!--
            --等价于
            -- <el-input :value="input" @input="input = $event" placeholder="请输入内容"></el-input>
            -->
        </template>
        `}};re=Ut([ht({components:{PCodeBlockDisplay:Ve}})],re);const Wt=b("br",null,null,-1),Yt=b("br",null,null,-1),Xt=b("br",null,null,-1),Zt=b("br",null,null,-1);function qt(a,s,n,t,l,i){const u=gt,g=bt,p=Lt,y=Ve;return f(),w(q,null,[z(g,{title:"v-model",column:1},{default:S(()=>[z(u,{label:"用法:"},{default:S(()=>[H(" 在表单输入元素或组件上创建双向绑定 ")]),_:1}),z(u,{label:"适用范围"},{default:S(()=>[H(k(`<input>
          <select>
          <textarea>
          <component> // 自定义组件
          `))]),_:1}),z(u,{label:"修饰符"},{default:S(()=>[Wt,H(" .lazy - 监听 change 事件而不是 input"),Yt,H(" .number - 将输入的合法字符串转为数字"),Xt,H(" .trim - 移除输入内容两端空格"),Zt]),_:1})]),_:1}),z(y,{code:a.code,title:"VModel.vue",toc:"language-html"},{default:S(()=>[b("div",null,[b("p",null,"input: "+k(a.input),1),z(p,{modelValue:a.input,"onUpdate:modelValue":s[0]||(s[0]=C=>a.input=C),placeholder:"请输入内容"},null,8,["modelValue"])])]),_:1},8,["code"])],64)}const ro=yt(re,[["render",qt]]);export{ro as default};
